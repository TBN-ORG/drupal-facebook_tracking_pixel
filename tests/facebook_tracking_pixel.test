<?php

/**
 * @file 
 * Contains tests for the Facebook Tracking Pixel module.
 */

/**
 * Test case.
 */
class FacebookTrackingPixelTestCase extends DrupalWebTestCase {

  /**
   * Implements getInfo().
   */
  public static function getInfo() {
    return array(
      'name' => t('Facebook Tracking Pixel tests'),
      'description' => t('Place tracking pixel onto a site and control events.'),
      'group' => t('Facebook Tracking Pixel'),
    );
  }

  /**
   * Implements setUp().
   */
  function setUp() {
    // Call the parent with an array of modules to enable for the test.
    parent::setUp(array('facebook_tracking_pixel'));

    // Create a generic authenticated user.
    $this->web_user = $this->drupalCreateUser();

    // @todo Create test pages using default content types

    // Test Basecode ID.
    db_insert('facebook_tracking_pixel_base_codes')
      ->fields([
        'base_code_name' => 'Test Basecode',
        'base_code_fbid' => '123123123',
        'base_code_global' => 1,
        'weight' => 10,
      ])
      ->execute();


    // @todo Create test Facebook Tracking Path Item


  }


  /**
   * Create a basic page node using the node form.
   */
  public function testFacebookTrackingPixelNodeCreate() {
    // Create node to edit.
    $edit = array();
    $edit['title'] = $this->randomName(8);
    $edit["body[und][0][value]"] = $this->randomName(16);
    $this->drupalPost('node/add/page', $edit, t('Save'));
    $this->assertText(t('Basic page @title has been created.', array('@title' => $edit['title'])));
  }

  /**
   * Test the module's functionality.
   */
  function testTodoChangeThisName() {
    // @TODO: write test!
  }

}
